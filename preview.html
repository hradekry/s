<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>Routine OS - Preview</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            background-color: #000000;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #0a0a0a;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #9333ea;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a855f7;
        }
        
        .card {
            background: #0a0a0a;
            border: 1px solid #a855f7;
            border-radius: 8px;
            padding: 16px;
        }
        
        .touch-target {
            min-height: 44px;
            min-width: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .timeline-item {
            border-left: 1px solid #a855f7;
            padding-left: 16px;
            padding-bottom: 16px;
            position: relative;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background: #a855f7;
            border-radius: 50%;
            left: -5px;
            top: 8px;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: 1px solid #a855f7;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .btn-primary {
            background: #a855f7;
            color: white;
        }
        
        .btn-primary:hover {
            background: #9333ea;
        }
        
        .btn-secondary {
            background: #0a0a0a;
            color: #d1d5db;
        }
        
        .btn-secondary:hover {
            background: #1a1a1a;
        }
        
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: flex-end;
            justify-content: center;
            z-index: 50;
        }
        
        .modal-content {
            background: #0a0a0a;
            border-top: 1px solid #a855f7;
            width: 100%;
            max-width: 448px;
            border-radius: 12px 12px 0 0;
            padding: 16px;
        }
        
        .input {
            width: 100%;
            padding: 8px 12px;
            background: #000000;
            border: 1px solid #a855f7;
            border-radius: 8px;
            color: white;
            font-size: 14px;
        }
        
        .input:focus {
            outline: none;
            ring: 2px;
            ring-color: #a855f7;
        }
        
        .fab {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #a855f7;
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 40;
        }
        
        .fab:hover {
            background: #9333ea;
        }
        
        .header {
            background: #0a0a0a;
            border-bottom: 1px solid #a855f7;
            position: sticky;
            top: 0;
            z-index: 30;
        }
        
        .empty-state {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            padding: 16px;
        }
        
        .badge {
            display: inline-block;
            font-size: 12px;
            background: rgba(168, 85, 247, 0.2);
            color: #d8b4fe;
            padding: 4px 8px;
            border-radius: 4px;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { Plus, X, Calendar, Clock, Repeat, Trash2, Menu } = lucide;

        // Simple event store for preview
        const eventStore = {
            events: [],
            listeners: [],
            
            addEvent(event) {
                const newEvent = {
                    id: Date.now().toString(),
                    ...event,
                    createdAt: new Date().toISOString()
                };
                this.events.push(newEvent);
                this.notifyListeners();
                return newEvent;
            },
            
            removeEvent(id) {
                this.events = this.events.filter(event => event.id !== id);
                this.notifyListeners();
            },
            
            getEventsForDate() {
                return this.events;
            },
            
            subscribe(listener) {
                this.listeners.push(listener);
                return () => {
                    this.listeners = this.listeners.filter(l => l !== listener);
                };
            },
            
            notifyListeners() {
                this.listeners.forEach(listener => listener(this.events));
            }
        };

        const Header = ({ currentDate }) => {
            const formatDate = (date) => {
                const options = { 
                    weekday: 'long', 
                    month: 'long', 
                    day: 'numeric',
                    year: 'numeric'
                };
                return date.toLocaleDateString('en-US', options);
            };

            const isToday = (date) => {
                const today = new Date();
                return date.toDateString() === today.toDateString();
            };

            return React.createElement('header', { className: 'header' },
                React.createElement('div', { className: 'px-4 py-3' },
                    React.createElement('div', { className: 'flex items-center justify-between' },
                        React.createElement('div', { className: 'flex items-center space-x-3' },
                            React.createElement('button', { className: 'touch-target text-purple-400 hover:text-purple-300 transition-colors' },
                                React.createElement(Menu, { size: 20 })
                            ),
                            React.createElement('div', null,
                                React.createElement('h1', { className: 'text-lg font-semibold text-white' },
                                    isToday(currentDate) ? 'Today' : formatDate(currentDate)
                                ),
                                isToday(currentDate) && React.createElement('p', { className: 'text-sm text-gray-400' }, formatDate(currentDate))
                            )
                        ),
                        React.createElement('button', { className: 'touch-target text-purple-400 hover:text-purple-300 transition-colors' },
                            React.createElement(Calendar, { size: 20 })
                        )
                    )
                )
            );
        };

        const TimelineItem = ({ event, onRemove }) => {
            const formatTime = (time) => {
                if (!time) return '';
                const [hours, minutes] = time.split(':');
                const hour = parseInt(hours);
                const ampm = hour >= 12 ? 'PM' : 'AM';
                const displayHour = hour % 12 || 12;
                return `${displayHour}:${minutes} ${ampm}`;
            };

            return React.createElement('div', { className: 'timeline-item mb-4' },
                React.createElement('div', { className: 'card' },
                    React.createElement('div', { className: 'flex items-start justify-between mb-2' },
                        React.createElement('div', { className: 'flex items-center space-x-2' },
                            event.type === 'recurring' 
                                ? React.createElement(Repeat, { size: 16, className: 'text-purple-400' })
                                : React.createElement(Calendar, { size: 16, className: 'text-purple-400' }),
                            event.time && React.createElement('span', { className: 'text-sm font-medium text-purple-300' }, formatTime(event.time))
                        ),
                        React.createElement('button', {
                            onClick: onRemove,
                            className: 'touch-target text-gray-500 hover:text-red-400 transition-colors'
                        }, React.createElement(Trash2, { size: 16 }))
                    ),
                    React.createElement('h3', { className: 'text-white font-medium mb-1' }, event.title),
                    event.description && React.createElement('p', { className: 'text-sm text-gray-400' }, event.description),
                    event.type === 'recurring' && React.createElement('div', { className: 'mt-2' },
                        React.createElement('span', { className: 'badge' }, 'Daily')
                    )
                )
            );
        };

        const Timeline = ({ events, onRemoveEvent }) => {
            const sortedEvents = [...events].sort((a, b) => {
                if (a.type === 'recurring' && b.type !== 'recurring') return -1;
                if (a.type !== 'recurring' && b.type === 'recurring') return 1;
                return (a.time || '').localeCompare(b.time || '');
            });

            if (events.length === 0) {
                return React.createElement('div', { className: 'empty-state' },
                    React.createElement('div', { className: 'text-center' },
                        React.createElement(Clock, { size: 48, className: 'mx-auto text-gray-600 mb-4' }),
                        React.createElement('h2', { className: 'text-lg font-medium text-gray-300 mb-2' }, 'No events yet'),
                        React.createElement('p', { className: 'text-sm text-gray-500' },
                            'Tap the + button to add your first event or task'
                        )
                    )
                );
            }

            return React.createElement('div', { className: 'flex-1 overflow-y-auto px-4 py-4' },
                React.createElement('div', { className: 'max-w-md mx-auto' },
                    sortedEvents.map(event => 
                        React.createElement(TimelineItem, {
                            key: event.id,
                            event: event,
                            onRemove: () => onRemoveEvent(event.id)
                        })
                    )
                )
            );
        };

        const AddEventModal = ({ onClose, onAddEvent }) => {
            const [formData, setFormData] = useState({
                title: '',
                description: '',
                time: '',
                type: 'onetime'
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!formData.title.trim()) return;
                onAddEvent(formData);
            };

            return React.createElement('div', { className: 'modal-overlay' },
                React.createElement('div', { className: 'modal-content' },
                    React.createElement('div', { className: 'flex items-center justify-between mb-4' },
                        React.createElement('h2', { className: 'text-lg font-semibold text-white' }, 'Add New Item'),
                        React.createElement('button', {
                            onClick: onClose,
                            className: 'touch-target text-gray-400 hover:text-white transition-colors'
                        }, React.createElement(X, { size: 20 }))
                    ),
                    React.createElement('form', { onSubmit: handleSubmit, className: 'space-y-4' },
                        React.createElement('div', null,
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-2' }, 'Title *'),
                            React.createElement('input', {
                                type: 'text',
                                value: formData.title,
                                onChange: (e) => setFormData({...formData, title: e.target.value}),
                                className: 'input',
                                placeholder: 'Enter title',
                                autoFocus: true
                            })
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-2' }, 'Description'),
                            React.createElement('textarea', {
                                value: formData.description,
                                onChange: (e) => setFormData({...formData, description: e.target.value}),
                                className: 'input resize-none',
                                placeholder: 'Add description (optional)',
                                rows: 3
                            })
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-2' }, 'Time'),
                            React.createElement('input', {
                                type: 'time',
                                value: formData.time,
                                onChange: (e) => setFormData({...formData, time: e.target.value}),
                                className: 'input'
                            })
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-300 mb-2' }, 'Type'),
                            React.createElement('div', { className: 'grid grid-cols-2 gap-2' },
                                React.createElement('button', {
                                    type: 'button',
                                    onClick: () => setFormData({...formData, type: 'onetime'}),
                                    className: `touch-target flex items-center justify-center space-x-2 px-3 py-2 rounded-lg border transition-colors ${
                                        formData.type === 'onetime'
                                            ? 'bg-purple-600 border-purple-500 text-white'
                                            : 'bg-deep-black border-purple-light text-gray-300'
                                    }`
                                }, React.createElement(Calendar, { size: 16 }), React.createElement('span', null, 'One-time')),
                                React.createElement('button', {
                                    type: 'button',
                                    onClick: () => setFormData({...formData, type: 'recurring'}),
                                    className: `touch-target flex items-center justify-center space-x-2 px-3 py-2 rounded-lg border transition-colors ${
                                        formData.type === 'recurring'
                                            ? 'bg-purple-600 border-purple-500 text-white'
                                            : 'bg-deep-black border-purple-light text-gray-300'
                                    }`
                                }, React.createElement(Repeat, { size: 16 }), React.createElement('span', null, 'Daily'))
                            )
                        ),
                        React.createElement('div', { className: 'flex space-x-2 pt-2' },
                            React.createElement('button', {
                                type: 'button',
                                onClick: onClose,
                                className: 'flex-1 touch-target btn btn-secondary'
                            }, 'Cancel'),
                            React.createElement('button', {
                                type: 'submit',
                                disabled: !formData.title.trim(),
                                className: 'flex-1 touch-target btn btn-primary'
                            }, 'Add')
                        )
                    )
                )
            );
        };

        const App = () => {
            const [events, setEvents] = useState([]);
            const [showAddModal, setShowAddModal] = useState(false);
            const [currentDate, setCurrentDate] = useState(new Date());

            useEffect(() => {
                setEvents(eventStore.getEventsForDate());
                
                const unsubscribe = eventStore.subscribe((updatedEvents) => {
                    setEvents(eventStore.getEventsForDate());
                });

                return unsubscribe;
            }, [currentDate]);

            const handleAddEvent = (eventData) => {
                eventStore.addEvent(eventData);
                setShowAddModal(false);
            };

            const handleRemoveEvent = (eventId) => {
                eventStore.removeEvent(eventId);
            };

            return React.createElement('div', { className: 'min-h-screen bg-deep-black flex flex-col' },
                React.createElement(Header, { currentDate }),
                React.createElement('main', { className: 'flex-1 overflow-hidden' },
                    React.createElement('div', { className: 'h-full flex flex-col' },
                        React.createElement(Timeline, {
                            events: events,
                            onRemoveEvent: handleRemoveEvent,
                            currentDate: currentDate
                        })
                    )
                ),
                React.createElement('button', {
                    onClick: () => setShowAddModal(true),
                    className: 'fab'
                }, React.createElement(Plus, { size: 24 })),
                showAddModal && React.createElement(AddEventModal, {
                    onClose: () => setShowAddModal(false),
                    onAddEvent: handleAddEvent
                })
            );
        };

        ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>
</html>
